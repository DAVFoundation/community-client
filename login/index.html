<!DOCTYPE html>
<html>
<head>
  <title>Login Form</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-4"></div>
      <div class="col-12 col-md-4">
        <form id="signupForm">
          <h2 class="text-muted text-center">Signup</h2>
          <div class="form-group">
            <input type='text' name='name' id='signupName' class="form-control" placeholder="enter full name">
          </div>
          <div class="form-group">
            <input type='text' name='email' id='signupEmail' class="form-control" placeholder="enter email">
          </div>
          <div class="form-group">
            <input type='text' name='password' id='signupPass' class="form-control" placeholder="enter password">
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input">
              Sign up for updates
            </label>
          </div>
          <input type="submit" class="btn btn-block btn-success" value="Signup">
        </form>
      </div>
      <div class="col-md-4"></div>
    </div>
    <br><br><br>
    <div class="row">
      <div class="col-md-4"></div>
      <div class="col-12 col-md-4">
        <form id="loginForm">
          <h2 class="text-muted text-center">Login</h2>
          <div class="form-group">
            <input type='text' name='email' id='loginEmail' class="form-control" placeholder="enter email">
          </div>
          <div class="form-group">
            <input type='text' name='password' id='loginPass' class="form-control" placeholder="enter password">
          </div>
          <input type="submit" class="btn btn-block btn-primary" value="Login">
        </form>
      </div>
      <div class="col-md-4"></div>
    </div>
    
  </div>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script>


var fetchInitt = {
  method: 'GET',
  credentials :'include'
}

document.querySelector("#loginForm").addEventListener("submit", function(e){
  e.preventDefault();

  var fetchInit = {
    method: 'POST',
    credentials :'include',
    headers: {
      'Accept':  'application/json',
       'Content-Type': 'application/json',
       'Cache': 'no-cache'
    },
    body: JSON.stringify({
      email: document.getElementById('loginEmail').value,
      password: document.getElementById('loginPass').value
    })
  }

  fetch('http://localhost:3000/api/login', fetchInit)
    .then(resp=>{
      if(resp.ok){
        window.location.replace('http://localhost:8080');
        return resp.json();
      };
    })
    .then(json=>{
      console.log(json);
      console.log(window.document.cookie);
    })
}, false)

document.querySelector("#signupForm").addEventListener("submit", function(e){
  e.preventDefault();

  var fetchInit = {
    method: 'POST',
    credentials :'include',
    headers: {
      'Accept':  'application/json',
      'Content-Type': 'application/json',
      'Cache': 'no-cache'
    },
    body: JSON.stringify({
      name: document.getElementById('signupName').value,
      email: document.getElementById('signupEmail').value,
      password: document.getElementById('signupPass').value
    })
  }

  fetch('http://localhost:3000/api/signup', fetchInit)
    .then(resp=>{
      if(resp.ok){
        window.location.replace('http://localhost:8080');
        return resp.json();
      };
    })
    .then(json=>{
      console.log(json);
      console.log(window.document.cookie);
    })
}, false)

</script>
</body>
</html>
